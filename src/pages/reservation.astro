---
import { Image } from 'astro:assets';
import Layout from '../layouts/Layout.astro';
import heroImg from '../assets/LandingImage.jpg';
// src/components/ReservationForm.astro
interface Props {
  restaurantPhone?: string;
}

const { restaurantPhone = "+919971135534" } = Astro.props;
---
<Layout title='Reservations' description='Reservations | Reserve your table at Vanchu Hut today!'>
    <section class="py-12 bg-white-100 font-agdasima">
      <Image src={heroImg} class="scale-100 w-screen h-[140px] transform -translate-y-[101px] md:-translate-y-[60px]  object-cover" alt="Decorative header - Vanchu Hut Chinese cuisine ambiance"/>
        <!-- <div class="absolute inset-0 bg-black opacity-80 w-screen h-[140px]"></div> -->
<div class="min-h-screen px-4 sm:px-6 lg:px-8">
  <div class="max-w-md mx-auto">


    <!-- Reservation Form -->
    <div class="bg-white shadow-lg rounded-lg p-6">
      <h1 class="hidden">Welcome to Vanchu Hut | Make a Reservation</h1>
      <h2 class="text-2xl font-semibold text-gray-800 mb-6">Make a Reservation</h2>
      
      <form id="reservationForm" class="space-y-6">
        <!-- Name Input -->
        <div>
          <label for="name" class="block text-sm font-medium text-gray-700">Full Name</label>
          <input 
            type="text" 
            id="name" 
            name="name" 
            required
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 p-2"
          >
        </div>

        <!-- Phone Input -->
        <div>
          <label for="phone" class="block text-sm font-medium text-gray-700">Phone Number</label>
          <input 
            type="tel" 
            id="phone" 
            name="phone" 
            required
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 p-2"
          >
        </div>

        <!-- Number of Guests -->
        <div>
          <label for="guests" class="block text-sm font-medium text-gray-700">Number of Guests</label>
          <select 
            id="guests" 
            name="guests" 
            required
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 p-2"
          >
            {[...Array(10)].map((_, i) => (
              <option value={i + 1}>{i + 1} {i === 0 ? 'Guest' : 'Guests'}</option>
            ))}
          </select>
        </div>

        <!-- Date Input -->
        <div>
          <label for="date" class="block text-sm font-medium text-gray-700">Date</label>
          <input 
            type="date" 
            id="date" 
            name="date" 
            required
            min={new Date().toISOString().split('T')[0]}
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 p-2"
          >
        </div>

        <!-- Time Input -->
  <!-- Time Input -->
<div>
    <label for="time" class="block text-sm font-medium text-gray-700">Time</label>
    <select 
        id="time" 
        name="time" 
        required
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 p-2"
    >
        {[11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22].map((hour) => (
            <option value={`${hour}:00`}>
                {hour % 12 || 12}:00 {hour >= 12 ? 'PM' : 'AM'}
            </option>
        ))}
    </select>
</div>

        <!-- Special Requests -->
        <div>
          <label for="requests" class="block text-sm font-medium text-gray-700">Special Requests</label>
          <textarea 
            id="requests" 
            name="requests"
            rows="3"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-red-500 focus:ring-red-500 p-2"
          ></textarea>
        </div>

        <!-- Submit Button -->
        <button
          type="submit"
          class="w-full bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors"
        >
          Reserve Now
        </button>
      </form>
    </div>
  </div>
</div>
    </section>
</Layout>
<script define:vars={{ restaurantPhone }}>
  document.getElementById('reservationForm').addEventListener('submit', (e) => {
    e.preventDefault();
    
    const formData = new FormData(e.target);
    const name = formData.get('name');
    const phone = formData.get('phone');
    const guests = formData.get('guests');
    const date = formData.get('date');
    const time = formData.get('time');
    const requests = formData.get('requests');

    // Format the message for WhatsApp
    const message = `
*New Reservation at Vanchu Hut*
Name: ${name}
Phone: ${phone}
Guests: ${guests}
Date: ${date}
Time: ${time}
Special Requests: ${requests || 'None'}
    `.trim();

    // Create WhatsApp URL
    const whatsappUrl = `https://wa.me/${restaurantPhone}?text=${encodeURIComponent(message)}`;
    
    // Redirect to WhatsApp
    window.location.href = whatsappUrl;
  });
</script>